"use client";

import { useState, useEffect } from "react";
import AnimatedSection from "./components/AnimatedSection";
import LoadingScreen from "./components/LoadingScreen";
import GradientText from "./components/GradientText";
import RotatingText from "./components/RotatingText";
import ElectricBorder from "./components/ElectricBorder";
import GlowButton from "./components/GlowButton";
import BlurText from "./components/BlurText";
import CardNav from "./components/CardNav";
import CircularGallery from "../components/CircularGallery";
import LightRays from "../components/LightRays";
import "./components/ProjectCarousel.css";
import "./components/CircularGallery.css";
import "./components/CurvedCardDesign.css";
import "./components/RainbowArcDesign.css";
import "./components/ScrollStackDesign.css";
import "./components/SpotlightCardDesign.css";
import "./components/CardSwap.css";

// Metadata can still be defined in a client component
// export const metadata: Metadata = {
//   title: "Yusuf - Yazƒ±lƒ±m Geli≈ütirici",
//   description: "Yusuf'un ki≈üisel portfolyo web sitesi.",
// };

export default function Home() {
  const [isLoading, setIsLoading] = useState(true);
  const [isMounted, setIsMounted] = useState(false);
  const [isScrolled, setIsScrolled] = useState(false);
  const [showNavBar, setShowNavBar] = useState(true);
  const [lastScrollY, setLastScrollY] = useState(0);
  const [currentSection, setCurrentSection] = useState('home');
  const [selectedCard, setSelectedCard] = useState<string | null>(null);

  useEffect(() => {
    setIsMounted(true);
    const timer = setTimeout(() => {
      setIsLoading(false);
    }, 2000);

    const handleScroll = () => {
      const currentScrollY = window.scrollY;
      
      setIsScrolled(currentScrollY > 100);
      
      // Check which section is currently visible
      const sections = ['home', 'projects', 'about', 'contact'];
      const windowHeight = window.innerHeight;
      
      for (const sectionId of sections) {
        const element = document.getElementById(sectionId);
        if (element) {
          const rect = element.getBoundingClientRect();
          if (rect.top <= windowHeight / 2 && rect.bottom >= windowHeight / 2) {
            setCurrentSection(sectionId);
            break;
          }
        }
      }
      
      // Always show navigation on home section
      if (currentSection === 'home') {
        setShowNavBar(true);
      } else if (currentScrollY < lastScrollY || currentScrollY < 50) {
        // Yukarƒ± scroll veya √ºst kƒ±sƒ±mda - g√∂ster
        setShowNavBar(true);
      } else if (currentScrollY > lastScrollY && currentScrollY > 50) {
        // A≈üaƒüƒ± scroll ve 50px'den fazla - gizle
        setShowNavBar(false);
      }
      
      setLastScrollY(currentScrollY);
    };

    window.addEventListener('scroll', handleScroll, { passive: true });
    return () => {
      clearTimeout(timer);
      window.removeEventListener('scroll', handleScroll);
    };
  }, [lastScrollY]);

  if (!isMounted) {
    return null;
  }

  if (isLoading) {
    return <LoadingScreen isLoading={isLoading} />;
  }

  return (
    <div className="bg-gray-900 text-white font-sans overflow-x-hidden relative">
      {/* Background Light Rays */}
      <LightRays count={16} />
      
      {/* Card Navigation */}
      <div className={`fixed top-4 left-1/2 transform -translate-x-1/2 z-50 transition-all duration-300 ease-in-out ${
        showNavBar 
          ? 'transform -translate-x-1/2 translate-y-0 opacity-100' 
          : 'transform -translate-x-1/2 -translate-y-full opacity-0'
      }`}>
        <CardNav
          items={[
            {
              label: "Ana Sayfa",
              bgColor: "#1f2937",
              textColor: "#fbbf24",
              links: [
                { label: "Ho≈ü Geldin", ariaLabel: "Ana sayfa", href: "#home" }
              ]
            },
            {
              label: "Hakkƒ±mda",
              bgColor: "#374151",
              textColor: "#fbbf24",
              links: [
                { label: "Deneyim", ariaLabel: "Deneyimlerim", href: "#about" },
                { label: "Yetenekler", ariaLabel: "Yeteneklerim", href: "#about" }
              ]
            },
            {
              label: "Projeler",
              bgColor: "#4b5563",
              textColor: "#fbbf24",
              links: [
                { label: "Portfolyo", ariaLabel: "Projelerim", href: "#projects" },
                { label: "ƒ∞leti≈üim", ariaLabel: "ƒ∞leti≈üim", href: "#contact" }
              ]
            }
          ]}
          logoComponent={
            <a href="#home" className="text-xl font-bold bg-gradient-to-r from-yellow-400 to-blue-600 bg-clip-text text-transparent cursor-pointer hover:opacity-80 transition-opacity">
              Yusuf Varƒ±≈ü
            </a>
          }
          baseColor="rgba(17, 24, 39, 0.95)"
          menuColor="#fbbf24"
          buttonBgColor="#fbbf24"
          buttonTextColor="#111827"
        />
      </div>

      {/* Hero Section */}
      <section id="home" className="min-h-screen flex items-center justify-center relative">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
          <div className="flex flex-col lg:flex-row items-center justify-between">
            {/* Left Side - Text Content */}
            <div className="w-full lg:w-1/2 text-center lg:text-left mb-12 lg:mb-0 lg:pr-16">
              <div className="space-y-6">
                <h1 className="text-4xl lg:text-6xl font-bold leading-tight">
                  <GradientText
                    colors={["#fbbf24", "#f59e0b", "#d97706"]}
                  >
                    Merhaba, Ben Yusuf
                  </GradientText>
                </h1>
                <div className="text-2xl lg:text-3xl text-gray-300">
                  <span>Yazƒ±lƒ±m Geli≈ütirici</span>
                </div>
                <p className="text-lg text-gray-400 max-w-lg mx-auto lg:mx-0">
                  Modern web teknolojileri ile kullanƒ±cƒ± dostu, performanslƒ± ve √∂l√ßeklenebilir uygulamalar geli≈ütiriyorum.
                </p>
              </div>
            </div>

            {/* Right Side - Skills Gallery */}
            <div className="w-1/2 flex items-center justify-center pt-8">
              <CircularGallery
                items={[
                  {
                    id: 1,
                    icon: "‚öõÔ∏è",
                    title: "Frontend Development",
                    skills: ["React", "Next.js", "HTML", "CSS", "JavaScript"],
                    backgroundColor: "linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(251, 191, 36, 0.3) 100%)"
                  },
                  {
                    id: 2,
                    icon: "üîß",
                    title: "Backend Development", 
                    skills: ["C#", "ASP.NET", "Node.js"],
                    backgroundColor: "linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(251, 191, 36, 0.3) 100%)"
                  },
                  {
                    id: 3,
                    icon: "üì±",
                    title: "Mobile Development",
                    skills: ["React Native", "iOS", "Android"],
                    backgroundColor: "linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(251, 191, 36, 0.3) 100%)"
                  },
                  {
                    id: 4,
                    icon: "üóÑÔ∏è",
                    title: "Database",
                    skills: ["MSSQL", "MongoDB", "Firebase", "SQLite"],
                    backgroundColor: "linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(251, 191, 36, 0.3) 100%)"
                  }
                ]}
                radius={160}
                autoRotate={true}
                rotationSpeed={0.2}
              />
            </div>
          </div>
        </div>
      </section>

      {/* About Section - Full Width */}
      <AnimatedSection>
        <section id="about" className="min-h-screen py-20 w-full bg-gradient-to-br from-gray-700 via-gray-800 to-gray-900">
          <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 className="text-4xl font-bold mb-16 text-yellow-400 text-center">Hakkƒ±mda</h2>
            
            <div className="flex transition-all duration-500 ease-in-out">
              {/* Left Side - Cards */}
              <div className={`transition-all duration-500 ease-in-out ${
                selectedCard ? 'w-1/2 pr-4' : 'w-full'
              }`}>
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                  {/* Ben Kimim Kartƒ± */}
                  <div 
                    onClick={() => setSelectedCard(selectedCard === 'who' ? null : 'who')}
                    className={`bg-black/20 backdrop-blur-sm border rounded-2xl p-8 cursor-pointer transition-all duration-300 hover:scale-105 ${
                      selectedCard === 'who' 
                        ? 'border-yellow-400/60 shadow-lg shadow-yellow-400/30' 
                        : 'border-yellow-400/20 hover:border-yellow-400/40'
                    }`}
                  >
                    <div className="text-center h-full flex flex-col justify-center items-center">
                      <div className="text-6xl mb-6">üë®‚Äçüíª</div>
                      <h3 className="text-2xl font-bold text-yellow-400">Ben Kimim?</h3>
                    </div>
                  </div>

                  {/* Deneyim Kartƒ± */}
                  <div 
                    onClick={() => setSelectedCard(selectedCard === 'experience' ? null : 'experience')}
                    className={`bg-black/20 backdrop-blur-sm border rounded-2xl p-8 cursor-pointer transition-all duration-300 hover:scale-105 ${
                      selectedCard === 'experience' 
                        ? 'border-yellow-400/60 shadow-lg shadow-yellow-400/30' 
                        : 'border-yellow-400/20 hover:border-yellow-400/40'
                    }`}
                  >
                    <div className="text-center h-full flex flex-col justify-center items-center">
                      <div className="text-6xl mb-6">üíº</div>
                      <h3 className="text-2xl font-bold text-yellow-400">Deneyimim</h3>
                    </div>
                  </div>

                  {/* Teknolojiler Kartƒ± */}
                  <div 
                    onClick={() => setSelectedCard(selectedCard === 'tech' ? null : 'tech')}
                    className={`bg-black/20 backdrop-blur-sm border rounded-2xl p-8 cursor-pointer transition-all duration-300 hover:scale-105 ${
                      selectedCard === 'tech' 
                        ? 'border-yellow-400/60 shadow-lg shadow-yellow-400/30' 
                        : 'border-yellow-400/20 hover:border-yellow-400/40'
                    }`}
                  >
                    <div className="text-center h-full flex flex-col justify-center items-center">
                      <div className="text-6xl mb-6">üöÄ</div>
                      <h3 className="text-2xl font-bold text-yellow-400">Teknolojilerim</h3>
                    </div>
                  </div>
                </div>
              </div>

              {/* Right Side - Detail Panel */}
              <div className={`transition-all duration-500 ease-in-out overflow-hidden ${
                selectedCard ? 'w-1/2 pl-4' : 'w-0'
              }`}>
                {selectedCard && (
                  <div className="bg-black/30 backdrop-blur-md border border-yellow-400/30 rounded-2xl p-8 h-full">
                    <div className="flex justify-between items-start mb-6">
                      <h3 className="text-3xl font-bold text-yellow-400">
                        {selectedCard === 'who' && 'Ben Kimim?'}
                        {selectedCard === 'experience' && 'Deneyimlerim'}  
                        {selectedCard === 'tech' && 'Teknoloji Yƒ±ƒüƒ±nƒ±m'}
                      </h3>
                      <button
                        onClick={() => setSelectedCard(null)}
                        className="text-yellow-400 hover:text-yellow-300 text-2xl"
                      >
                        √ó
                      </button>
                    </div>
                    
                    <div className="space-y-4 text-gray-300 leading-relaxed">
                      {selectedCard === 'who' && (
                        <>
                          <p>Merhaba! Ben <span className="text-yellow-400 font-semibold">Yusuf Varƒ±≈ü</span>. Yazƒ±lƒ±m geli≈ütirme d√ºnyasƒ±nda tutkuyla √ßalƒ±≈üan bir geli≈ütiriciyim.</p>
                          <p>Teknolojiye olan merakƒ±m ve s√ºrekli √∂ƒürenme isteƒüim sayesinde, her g√ºn kendimi geli≈ütirmeye devam ediyorum. Karma≈üƒ±k problemleri √ß√∂zmek ve yaratƒ±cƒ± √ß√∂z√ºmler √ºretmek beni motive ediyor.</p>
                          <p>Kod yazmak benim i√ßin sadece bir meslek deƒüil, aynƒ± zamanda bir sanat formu. Her projeyi bir ba≈üyapƒ±t yaratma fƒ±rsatƒ± olarak g√∂r√ºyorum.</p>
                        </>
                      )}
                      
                      {selectedCard === 'experience' && (
                        <>
                          <p><span className="text-yellow-400 font-semibold">5+ yƒ±llƒ±k</span> yazƒ±lƒ±m geli≈ütirme deneyimim boyunca onlarca proje geli≈ütirdim.</p>
                          <p>Web uygulamalarƒ±, mobil uygulamalar ve API'ler geli≈ütirme konusunda uzmanla≈ütƒ±m. Modern web teknolojileriyle kullanƒ±cƒ± dostu, performanslƒ± ve √∂l√ßeklenebilir uygulamalar yaratƒ±yorum.</p>
                          <p>Proje y√∂netiminden deployment'a kadar yazƒ±lƒ±m geli≈ütirme s√ºrecinin her a≈üamasƒ±nda deneyim sahibiyim.</p>
                          <p>Takƒ±m √ßalƒ±≈ümasƒ± ve ment√∂rl√ºk konularƒ±nda da aktif rol alƒ±yorum.</p>
                        </>
                      )}
                      
                      {selectedCard === 'tech' && (
                        <>
                          <div className="mb-4">
                            <h4 className="text-yellow-400 font-semibold mb-2">Frontend:</h4>
                            <p>React.js, Next.js, TypeScript, HTML5, CSS3, Tailwind CSS ile modern ve responsive kullanƒ±cƒ± aray√ºzleri geli≈ütiriyorum.</p>
                          </div>
                          <div className="mb-4">
                            <h4 className="text-yellow-400 font-semibold mb-2">Backend:</h4>
                            <p>Node.js, C#, ASP.NET Core ile g√º√ßl√º ve √∂l√ßeklenebilir API'ler ve servisler yazƒ±yorum.</p>
                          </div>
                          <div className="mb-4">
                            <h4 className="text-yellow-400 font-semibold mb-2">Mobile:</h4>
                            <p>React Native ile iOS ve Android platformlarƒ± i√ßin cross-platform uygulamalar geli≈ütiriyorum.</p>
                          </div>
                          <div>
                            <h4 className="text-yellow-400 font-semibold mb-2">Database:</h4>
                            <p>MSSQL, MongoDB, Firebase ve SQLite ile veri y√∂netimi konusunda uzmanƒ±m.</p>
                          </div>
                        </>
                      )}
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        </section>
      </AnimatedSection>

      {/* Projelerim Section - Full Width */}
      <AnimatedSection>
        <section id="projects" className="min-h-screen py-20 w-full bg-gray-900">
          <h2 className="text-4xl font-bold text-center mb-12 text-yellow-400">Projelerim</h2>
          <div className="px-8">
            <div className="text-center text-white">
              <p className="text-lg">Projelerim yakƒ±nda eklenecek...</p>
            </div>
          </div>
        </section>
      </AnimatedSection>


      {/* Contact Section - Full Width */}
      <AnimatedSection>
        <section id="contact" className="min-h-screen py-20 w-full bg-gray-900">
          <div className="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 className="text-4xl font-bold mb-12 text-yellow-400">ƒ∞leti≈üim</h2>
            <div className="space-y-8">
              <p className="text-lg text-gray-300">
                Projeleriniz i√ßin benimle ileti≈üime ge√ßebilirsiniz.
              </p>
              <div className="flex flex-col sm:flex-row gap-4 justify-center">
                <GlowButton
                  color="#fbbf24"
                >
                  <a href="mailto:email@example.com">Email G√∂nder</a>
                </GlowButton>
                <GlowButton
                  color="#3b82f6"
                >
                  <a href="https://linkedin.com/in/yusuf">LinkedIn</a>
                </GlowButton>
              </div>
            </div>
          </div>
        </section>
      </AnimatedSection>

      {/* Footer */}
      <footer className="bg-gray-800 py-8">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="text-center">
            <div className="text-2xl font-bold text-yellow-400 mb-4">Yusuf</div>
            <div className="text-gray-400 mb-4">
              <p>¬© 2024 Yusuf. T√ºm haklarƒ± saklƒ±dƒ±r.</p>
            </div>
            <div className="flex justify-center space-x-6">
              <ul className="flex space-x-6 text-sm">
                <li><a href="#home" className="hover:text-yellow-400 transition-colors">Ana Sayfa</a></li>
                <li><a href="#about" className="hover:text-yellow-400 transition-colors">Hakkƒ±mda</a></li>
                <li><a href="#projects" className="hover:text-yellow-400 transition-colors">Projelerim</a></li>
                <li><a href="#contact" className="hover:text-yellow-400 transition-colors">ƒ∞leti≈üim</a></li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
}